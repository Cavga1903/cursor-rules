---
alwaysApply: true
---

# omniMarketMvp - Master Roadmap Rules

**Bu dosya her zaman uygulanÄ±r. Roadmap'e gÃ¶re Ã§alÄ±ÅŸ.**

**Roadmap DosyasÄ±:** `_bmad-output/planning-artifacts/roadmap.mdc`

---

## ðŸŽ¯ Ã–ncelik SÄ±rasÄ± (Her Zaman Takip Et)

### 1. ðŸ”´ P0 (CRITICAL) - GÃ¼venlik ve Temel Ä°ÅŸlevsellik
**Durum:** âœ… **TAMAMLANDI** (2026-01-18)

**Tamamlanan Ä°ÅŸler:**
- âœ… Rate Limiting (C1)
- âœ… Timing Attack Protection (C2)
- âœ… Backend PIN Validation (C3)
- âœ… Session Storage Security (C4)
- âœ… Race Condition Fixes (C5)
- âœ… User Enumeration Prevention (C6)
- âœ… Unsafe unwrap() Fixes (C7)
- âœ… Input Sanitization (C8)

### 2. ðŸ”´ P1 (HIGH) - Code Quality & Performance
**Durum:** âœ… **TAMAMLANDI** (2026-01-18)

**Tamamlanan Ä°ÅŸler:**
- âœ… Backend Role Validation
- âœ… React Hook Compliance
- âœ… setTimeout Cleanup
- âœ… i18n TutarlÄ±lÄ±ÄŸÄ±
- âœ… N+1 Query Problem Fixes
- âœ… Missing Database Indexes

### 3. ðŸ”´ P2 (MEDIUM) - Code Quality Improvements
**Durum:** âœ… **TAMAMLANDI** (2026-01-18)

**Tamamlanan Ä°ÅŸler:**
- âœ… Console.log Cleanup
- âœ… Type Safety Ä°yileÅŸtirmeleri
- âœ… Magic Numbers Extraction
- âœ… Code Style Standardization

### 4. ðŸ”´ P3 (HIGH) - Ãœretim HazÄ±rlÄ±ÄŸÄ± (ÅžU ANKÄ° Ã–NCELÄ°K)

#### 4.1 Test Infrastructure (KRÄ°TÄ°K - EN YÃœKSEK Ã–NCELÄ°K)
**Durum:** ðŸ”´ **YAPILMADI**  
**Tahmini SÃ¼re:** 1-2 hafta (15-20 saat)

**Aksiyonlar:**
- [ ] Test framework setup (Vitest + React Testing Library)
- [ ] Critical path tests (authentication, POS, stock)
- [ ] Integration tests (Tauri commands)
- [ ] Test coverage: %0 â†’ %60+

**BaÅŸarÄ± Kriterleri:**
- âœ… Test coverage: %60+
- âœ… Critical path tests: 100% coverage
- âœ… CI/CD integration

#### 4.2 Documentation Improvements
**Durum:** ðŸŸ¡ **KISMEN YAPILDI**  
**Tahmini SÃ¼re:** 1 hafta (8-10 saat)

**Aksiyonlar:**
- [ ] API documentation (Tauri commands)
- [ ] Component documentation (JSDoc)
- [ ] Architecture decision records (ADR)
- [ ] User guide (TÃ¼rkÃ§e)

#### 4.3 UI Refactor (Tam Frontend Yenileme) - KRÄ°TÄ°K: KullanÄ±cÄ± Deneyimi
**Durum:** ðŸ”´ **YAPILMADI**  
**Tahmini SÃ¼re:** 4-6 hafta (60-80 saat)

**Referanslar:**
- Design Source: `stitch_main_pos_terminal_screen/` klasÃ¶rÃ¼
- UI Refresh Plan: `_bmad-output/planning-artifacts/ui-refresh-plan-incremental.md`
- Design System Guide: `stitch_main_pos_terminal_screen/omni-panel_design_system_guide/`
- Brand Identity: `stitch_main_pos_terminal_screen/omni-panel_brand_identity_&_icons/`

**6 FazlÄ± Plan:**
1. **Phase 1: Design System Foundation** (1 hafta)
   - Tailwind CSS kurulumu
   - Material Symbols font
   - Design tokens oluÅŸturma
   - Color palette extraction

2. **Phase 2: Core Components Refresh** (1.5 hafta)
   - Header, Sidebar, Button, Input components
   - Modal, Dialog, Toast components
   - Component library oluÅŸturma

3. **Phase 3: POS Screen Complete Refactor** (1.5 hafta)
   - POS header refresh
   - Search & Categories column
   - Cart column (table, items, actions)
   - Payment column (customer, summary, payment)

4. **Phase 4: Owner Dashboard & Pages** (1 hafta)
   - Dashboard refresh (KPI cards, charts)
   - Products Page refresh
   - Stock Page refresh
   - Sales History Page refresh
   - Users Page refresh

5. **Phase 5: Login & Auth Screens** (0.5 hafta)
   - Login page refresh
   - Splash screen (if applicable)
   - Error states & empty states

6. **Phase 6: Additional Screens** (1 hafta)
   - Product Management screens
   - Stock Management screens
   - Settings screens (if applicable)
   - Receipt preview screen

**BaÅŸarÄ± Kriterleri:**
- âœ… TÃ¼m ekranlar stitch design'larÄ±na uygun
- âœ… Design system tutarlÄ±lÄ±ÄŸÄ±: %100
- âœ… Dark mode: Tam destek
- âœ… Performance: Bundle size < 500KB
- âœ… Accessibility: WCAG 2.1 AA

#### 4.4 Performance Optimization
**Durum:** ðŸŸ¡ **KISMEN YAPILDI**  
**Tahmini SÃ¼re:** 1 hafta (8-10 saat)

**Aksiyonlar:**
- [ ] Bundle size optimization
- [ ] Code splitting (route-based)
- [ ] Image optimization
- [ ] Database query optimization (remaining)

---

## ðŸ”„ SÃ¼reÃ§ DÃ¶ngÃ¼sÃ¼ (Her Zaman Takip Et)

### GeliÅŸtirme DÃ¶ngÃ¼sÃ¼

```
1. PLANLAMA (Planning)
   â”œâ”€ Epic/Story seÃ§imi
   â”œâ”€ Acceptance criteria review
   â”œâ”€ Technical design
   â””â”€ Task breakdown

2. GELÄ°ÅžTÄ°RME (Development)
   â”œâ”€ Feature implementation
   â”œâ”€ Code review (self)
   â”œâ”€ Local testing
   â””â”€ Documentation update

3. KALÄ°TE KONTROLÃœ (Quality Gate)
   â”œâ”€ Type checking (npm run typecheck)
   â”œâ”€ Rust check (cargo check)
   â”œâ”€ Smoke test (npm run tauri dev)
   â””â”€ Manual testing

4. COMMIT & PUSH
   â”œâ”€ Git commit (conventional commits)
   â”œâ”€ Git push
   â””â”€ Status update

5. AUDIT & HARDENING (Periyodik)
   â”œâ”€ Codebase audit (@codebase audit)
   â”œâ”€ Security review
   â”œâ”€ Performance analysis
   â””â”€ Technical debt review

6. RETROSPECTIVE (Periyodik)
   â”œâ”€ Epic retrospective
   â”œâ”€ Process improvement
   â”œâ”€ Lessons learned
   â””â”€ Roadmap update
```

### Kalite KapÄ±larÄ± (Quality Gates)

**Her commit Ã¶ncesi:**
1. âœ… `npm run typecheck` - TypeScript type checking
2. âœ… `cargo check` - Rust compilation check
3. âœ… `npm run tauri dev` - Smoke test (15 saniye, panic check)

**Her epic sonrasÄ±:**
1. âœ… Code review (adversarial mode)
2. âœ… Security audit
3. âœ… Performance analysis
4. âœ… Documentation review

---

## ðŸ“‹ Epic Durum Ã–zeti

| Epic | Durum | Stories | Tamamlanma |
|------|-------|---------|------------|
| Epic 1: Sistem Kurulumu | âœ… **TAMAMLANDI** | 5/5 | 100% |
| Epic 2: Kimlik DoÄŸrulama | âœ… **TAMAMLANDI** | 5/5 | 100% |
| Epic 3: ÃœrÃ¼n YÃ¶netimi | âœ… **TAMAMLANDI** | 5/5 | 100% |
| Epic 4: Stok YÃ¶netimi | âœ… **TAMAMLANDI** | 5/5 | 100% |
| Epic 5: POS Ä°ÅŸlemleri | âœ… **TAMAMLANDI** | 5/5 | 100% |
| Epic 6: Dashboard | âœ… **TAMAMLANDI** | 5/5 | 100% |
| Epic 7: Export & Backup | âš ï¸ **IN-PROGRESS** | 4/5 | 80% |
| Epic 8: Lokalizasyon | âœ… **TAMAMLANDI** | 2/2 | 100% |

**Toplam:** 7 epic tamamlandÄ±, 1 epic in-progress, **36/37 story tamamlandÄ±**

---

## ðŸŽ¯ Åžu Anki Ã–ncelikler (2026-01-18)

1. ðŸ”´ **Test Infrastructure** (Hafta 1-2) - EN YÃœKSEK Ã–NCELÄ°K
2. ðŸŸ¡ **Documentation Improvements** (Hafta 3)
3. ðŸ”´ **UI Refactor** (Hafta 4-9) - KRÄ°TÄ°K: KullanÄ±cÄ± Deneyimi
4. ðŸŸ¡ **Performance Optimization** (Hafta 10)

**Hedef:** Ãœretim hazÄ±rlÄ±k kriterlerine ulaÅŸmak (10 hafta iÃ§inde)

---

## ðŸ“š Referanslar (Her Zaman Kontrol Et)

### DokÃ¼mantasyon
- **Roadmap:** `_bmad-output/planning-artifacts/roadmap.mdc` â­ **ANA REFERANS**
- **PRD:** `_bmad-output/planning-artifacts/prd.md`
- **Architecture:** `_bmad-output/planning-artifacts/architecture.md`
- **Epics:** `_bmad-output/planning-artifacts/epics.md`
- **Audit Report:** `_bmad-output/planning-artifacts/codebase-audit-report.md`
- **UI Refresh Plan:** `_bmad-output/planning-artifacts/ui-refresh-plan-incremental.md`

### Design ReferanslarÄ±
- **Design Source:** `stitch_main_pos_terminal_screen/` klasÃ¶rÃ¼
  - `main_pos_terminal_screen_1/code.html` - Ana POS tasarÄ±mÄ±
  - `main_pos_terminal_screen_2/code.html` - Alternatif POS tasarÄ±mÄ±
  - `pos_login_/code.html` - Login ekranÄ± tasarÄ±mÄ±
  - `owner_dashboard_overview/code.html` - Dashboard tasarÄ±mÄ±
  - `product_management_table/code.html` - ÃœrÃ¼n yÃ¶netimi tasarÄ±mÄ±
  - `stock_inventory_tracking/code.html` - Stok takibi tasarÄ±mÄ±
  - `omni-panel_design_system_guide/` - Design system rehberi
  - `omni-panel_brand_identity_&_icons/` - Brand identity ve icon'lar

### Workflow'lar ve Agent'lar
- **BMad Master Agent:** `@_bmad/core/agents/bmad-master.md`
- **Party Mode Workflow:** `@_bmad/core/workflows/party-mode/workflow.md`
- **Document Project:** `@_bmad/bmm/workflows/document-project`
- **Codebase Audit:** `@codebase audit`
- **Cleanup Plan:** `@_bmad/bmm/workflows/cleanup-plan`

---

## âš ï¸ Kritik Kurallar

### 1. Ã–ncelik SÄ±rasÄ±na Uy
- P0 â†’ P1 â†’ P2 â†’ P3 sÄ±rasÄ±nÄ± takip et
- Åžu anki Ã¶ncelik: **Test Infrastructure** (P3.1)

### 2. SÃ¼reÃ§ DÃ¶ngÃ¼sÃ¼ne Uy
- Her adÄ±mda quality gate'leri Ã§alÄ±ÅŸtÄ±r
- Commit Ã¶ncesi mutlaka typecheck, cargo check, smoke test

### 3. Roadmap'e GÃ¶re Ã‡alÄ±ÅŸ
- Yeni Ã¶zellik eklerken roadmap'i kontrol et
- Epic durumunu gÃ¼ncelle
- Tamamlanan iÅŸleri iÅŸaretle

### 4. Design System'e Uy (UI Refactor sÄ±rasÄ±nda)
- Tailwind CSS utility classes kullan
- Design token'larÄ± kullan
- Component library'den component'leri kullan
- Stitch design'larÄ±na uy

### 5. Verimlilik Ä°yileÅŸtirmeleri
- Her dÃ¼zenleme sonrasÄ± Ã¶ÄŸrenilen dersleri dokÃ¼mante et
- Pattern'leri template'lere ekle
- Otomasyon fÄ±rsatlarÄ±nÄ± deÄŸerlendir

---

## ðŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§

### "BaÅŸla" Komutu (Otomatik BaÅŸlangÄ±Ã§)

**KullanÄ±cÄ± "baÅŸla" dediÄŸinde sistem otomatik olarak:**

1. âœ… Roadmap'i kontrol et (`roadmap.mdc`) - Åžu anki Ã¶nceliÄŸi belirle
2. âœ… Epic durumunu kontrol et - Hangi epic'ler tamamlandÄ±?
3. âœ… Ä°lgili senaryoyu seÃ§ (Test Infrastructure, UI Refactor, Documentation, Performance)
4. âœ… Ä°lgili dosyalarÄ± kontrol et
5. âœ… Ä°lgili workflow'larÄ± belirle
6. âœ… Ä°lk adÄ±mlarÄ± gÃ¶ster

**Referans:** `start-guide.mdc` - Otomatik baÅŸlangÄ±Ã§ senaryolarÄ±

**Åžu Anki Ã–ncelik (2026-01-18):**
1. ðŸ”´ **Test Infrastructure** (P3.1) - EN YÃœKSEK Ã–NCELÄ°K
2. ðŸ”´ **UI Refactor** (P3.3) - KRÄ°TÄ°K: KullanÄ±cÄ± Deneyimi
3. ðŸŸ¡ **Documentation Improvements** (P3.2)
4. ðŸŸ¡ **Performance Optimization** (P3.4)

---

### "Devam Et" Komutu (Otomatik Devam)

**KullanÄ±cÄ± "devam et" dediÄŸinde sistem otomatik olarak:**

1. âœ… Son yapÄ±lan iÅŸi kontrol et (roadmap, epic, story)
2. âœ… Epic durumunu kontrol et (tamamlandÄ± mÄ±? in-progress mi?)
3. âœ… Story durumunu kontrol et (acceptance criteria tamamlandÄ± mÄ±?)
4. âœ… Workflow durumunu kontrol et (yarÄ±da kaldÄ± mÄ±?)
5. âœ… Bir sonraki adÄ±mÄ± belirle (epic, story, workflow)
6. âœ… Ä°lgili dosyalarÄ± kontrol et (story file, code review, planning artifacts)
7. âœ… Ä°lgili workflow'u devam ettir veya baÅŸlat

**Referans:** `start-guide.mdc` - "Devam Et" komutu senaryolarÄ±

**Senaryolar:**
- Epic in-progress â†’ Epic'e devam et
- Story in-progress â†’ Story'ye devam et
- Workflow yarÄ±da kaldÄ± â†’ Workflow'u `--resume` ile devam ettir
- Ä°ÅŸ tamamlandÄ± â†’ Bir sonraki Ã¶ncelikli iÅŸe geÃ§

---

**Yeni bir Ã¶zellik eklerken:**
1. Development checklist Ã§alÄ±ÅŸtÄ±r: `npm run dev:checklist`
2. Roadmap'i kontrol et (`_bmad-output/planning-artifacts/roadmap.mdc`) â­ ZORUNLU
3. Ã–ncelik sÄ±rasÄ±nÄ± kontrol et (yukarÄ±daki tablo)
4. Epic durumunu kontrol et
5. SÃ¼reÃ§ dÃ¶ngÃ¼sÃ¼nÃ¼ takip et (`development-workflow.mdc`)
6. Quality gate'leri Ã§alÄ±ÅŸtÄ±r: `npm run dev:gates`
7. Roadmap'i gÃ¼ncelle

**UI Refactor yaparken:**
1. `stitch_main_pos_terminal_screen/` klasÃ¶rÃ¼nden design'Ä± incele
2. Design system guide'Ä± kontrol et
3. Component library'den mevcut component'leri kullan
4. Tailwind utility classes kullan
5. Design token'larÄ± kullan

---

## ðŸ”„ Sistemsel Kod Yazma SÃ¼reci

**Her kod yazma iÅŸleminde:**
1. **PRE-CODE:** 
   - `development-workflow.mdc` - Kod yazmadan Ã¶nce kontrol
   - `bmad-context-checker.mdc` - Kategorize edilmiÅŸ BMad context kontrolÃ¼
2. **DURING-CODE:** Rules'lara uy (roadmaprules, reactrules, mvprules)
3. **POST-CODE:** Quality gates Ã§alÄ±ÅŸtÄ±r (`npm run dev:gates`)

**Otomatik Kontroller:**
- `npm run dev:checklist` - Pre-code checklist (roadmap + BMad context)
- `npm run dev:gates` - Post-code quality gates
- `npm run mvp:check` - Quick check (typecheck + cargo check)

**BMad Context KontrolÃ¼ (Kategorize EdilmiÅŸ):**
- **Planning Artifacts:** roadmap, prd, epics, architecture (feature ekleme)
- **Implementation Artifacts:** story files, code reviews (story implementation)
- **Core Documentation:** API contracts, data models, components (backend/frontend deÄŸiÅŸikliÄŸi)
- **BMad Workflows:** Ä°lgili workflow'larÄ± Ã§alÄ±ÅŸtÄ±r (gerekirse)

---

**Son GÃ¼ncelleme:** 2026-01-18  
**Roadmap Versiyon:** 1.0.0
